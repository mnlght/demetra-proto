syntax="proto3";

package f;
option go_package = "demetra.f.v1;fv1";

message FileUploadRequest {
  string file_name = 1;
  bytes chunk = 2;
}

message FileUploadResponse {
  string link = 1;
  uint32 size = 2;
}

message FileDownloadRequest {
  string id = 1;
  string path = 2;
}

message FileDownloadResponse {
  string file_name = 1;
  bytes chunk = 2;
}

message FilesListRequest {
  string bucket = 1;
  string key = 2;
}

message FilesListResponse {
  repeated string link = 1;
}

service FileService {
  rpc Upload(stream FileUploadRequest) returns(FileUploadResponse);
  rpc Download(FileDownloadRequest) returns(stream FileDownloadResponse);
  rpc List(FilesListRequest) returns(FilesListResponse);
}